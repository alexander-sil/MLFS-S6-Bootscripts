#!/bin/execlineb -P

fdmove -c 2 1
backtick -n bytes { cat /proc/sys/kernel/random/poolsize }
importas -u bytes bytes
if -t {
        foreground {
                if { s6-test -z $bytes }
                define defbytes 512
                umask 077
                dd if=/dev/urandom of=/var/lib/random-seed count=1 bs=$defbytes
                }
        true
}
umask 077
dd if=/dev/urandom of=/var/lib/random-seed count=1 bs=$bytes
